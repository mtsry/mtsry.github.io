<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>

<title>mtsry's Compendium - Vijver</title>
<meta name="description" content="Information on ponds.">
<meta name="keywords" content="mtsry, compendium, information, vijver, goudvis, pond, goldfish, koi">
<meta name="robots" content="noindex">

<link rel="stylesheet" type="text/css" href="style.css">

</head>

<body>
<div id="page">

<div id="header">
  <h2>
    <a href="index.html">Home</a> &nbsp;&nbsp;&nbsp;&nbsp; 
    <A HREF="vijver.html">Vijver</A> &nbsp;&nbsp;&nbsp;&nbsp;
    <A HREF="koi.html">Koi</A> &nbsp;&nbsp;&nbsp;&nbsp;
    Techniek
  </h2>
</div>

<div id="menu">
<p style="margin-top: 0px;"><a href="techniek.html">Techniek</a></p>
<p style="margin-top: 0px;"><a href="arduino.html">Arduino</a></p>
<p style="margin-top: 0px;"><a href="koicafe.html">Koi Caf&eacute</a><br>
  &nbsp;&nbsp;&nbsp;&nbsp;<a href="koicafe.html">controller 1.0</a><br>
  &nbsp;&nbsp;&nbsp;&nbsp;<a href="koicafe.html#controller2">controller 2.0</a></p>
<p style="margin-top: 0px;"><a href="eiwitafschuimer.html">Eiwitafschuimer</a></p>
</div>

<div id="content">
<h2><a name="koicafe"></a>Koi Caf&eacute controller 1.0</h2>

<p>Als alternatief voor de bijgeleverde timer kan een Arduino Nano als timer voor het Koi Caf&eacute voederapparaat gebruikt worden. 
Door de programmatie kunnen een aantal voederschema's vooraf gedefinieerd worden en kan de tijdsduur van elke voederbeurt op een eenvoudige manier gewijzigd worden. 
En met de nodige uitbreidingen kan zelfs het relais vervangen worden door een MOSFET als schakelelement.</p>
<p><img src="./pictures/koicafe.jpg" width=250></p>

<p><br></p>
<p><h3>Componenten</h3>
  <ul>
    <li>Arduino Nano op breakout shield met schroefconnectors</li>
    <li>DS3231 Real Time Clock</li>
    <li>Grove 6-Position DIP Switch</li>
    <li>TM1637 7-Segment display</li>
    <li>IRF520 MOSFET Switch module</li>
  </ul>  
</p>

<p><img src="./pictures/2022-08-13.jpg"><br>
(13 augustus 2022)</p>

<p><br></p>
<p><h3>Voederprogramma</h3></p>
<p><img src="./pictures/pr05.png" height=72></p>

<table>
  <tr>
    <td>Programma</td>
	<td>DIP<br>Switch</td>
    <td>Voedertijden</td>
  </tr>
  <tr>
    <td>Pr00<br>
	Pr01<br>
	Pr02<br>
	Pr03<br>
	Pr04<br>
	Pr05<br>
	Pr06<br>
	Pr07</td>
	<td>000<br>
	001<br>
	010<br>
	011<br>
	100<br>
	101<br>
	110<br>
	111</td>
    <td>09:00 <u>17:00</u><br>
	08:00 13:00 <u>18:00</u><br>
	07:00 11:00 15:00 <u>19:00</u><br>
	07:00 10:00 13:00 16:00 <u>19:00</u><br>
	06:30 09:15 12:00 14:45 17:30 <u>20:15</u><br>
	06:00 08:30 11:00 13:30 16:00 <u>19:00</u> 21:30<br>
	06:00 08:15 10:30 12:45 15:00 17:15 <u>19:30</u> 21:45<br>
	06:00 08:00 10:00 12:00 14:00 16:00 18:00 <u>20:00</u> 22:00</td>
  </tr>
</table>


<p><br></p>
<p><h3>Duurtijd voederbeurt</h3></p>
<p><img src="./pictures/t200.png" height=72></p>

<table>
  <tr>
    <td>Instelling</td>
	<td>DIP<br>Switch</td>
    <td>Duurtijd</td>
  </tr>
  <tr>
    <td>t100<br>
	t125<br>
	t150<br>
	t200</td>
	<td>00<br>
	01<br>
	10<br>
	11</td>
    <td>1000<br>
	1250<br>
	1500<br>
	2000</td>
  </tr>
</table>

<p><br></p>
<p><h3>Alle voerbeurten automatisch of ook enkele voederbeurten handmatig</h3></p>
<p>Handmatig wil zeggen dat de onderstreepte voederbeurten in de tabel met voedertijden niet worden uitgevoerd.</p>
<p><img src="./pictures/hand.png" height=72></p>
<p><img src="./pictures/auto.png" height=72></p>

<table>
  <tr>
    <td>Instelling</td>
	<td>DIP<br>Switch</td>
  </tr>
  <tr>
    <td>HAnd<br>
	Auto</td>
	<td>0<br>
	1</td>
  </tr>
</table>

<p><A HREF="#koicafe"><img src="./pictures/return.png" alt="Return button"/></A></p>
<p>&nbsp;</p>

<h2><a name="controller2"></a>Koi Caf&eacute controller 2.0</h2>

<p>De overstap naar een Arduino Mega als timer voor het Koi Café voederapparaat is ingegeven door het verbruik van de Arduino Nano met zijn uitbreidingen. 
De bijgeleverde batterij in combinatie met het zonnepaneel dat zijn ding niet meer doet, hield het maar enkele dagen uit. 
Een mogelijke oplossing is gebruik te maken van een netstekkervoeding en een kabel doorheen de paal naar het Koi Caf&eacute voederapparaat te trekken. 
Dit geeft dan weer extra mogelijkheden om de controller vanop afstand aan te sturen wanneer deze mee in het computernetwerk wordt geschakeld via een Ethernet shield.</p>

<p><br></p>
<h3>Componenten</h3>
<p>
  <ul>
    <li>Arduino Mega</li>
    <li>W5100 Ethernet shield</li>
    <li>Prototype shield with mini breadboard</li>
    <li>DS3231 Real Time Clock</li>
    <li>TM1637 7-Segment display</li>
    <li>IRF520 MOSFET Switch module</li>
  </ul>  
</p>

<p><img src="./pictures/2022-09-04.jpg"><br>
(4 september 2022)</p>

<p><br></p>
<h3>Instructies</h3>

<p>In het geval van de Arduino Mega is de URL het LAN IP adres. 
Door gebruik te maken van de optionele query string (volgend op het vraagteken) kunnen instructies doorgegeven worden aan de Ethernet client. 
Enkelvoudige instructies maken enkel gebruik van de ‘parameter’ syntax, 
en met de ‘parameter=waarde’ syntax kunnen waarden aan variabelen toegekend worden.</p>
<p style="font-family:'Courier New', Courier, monospace;">192.168.1.128/?HAND_FEEDING<br>
192.168.1.128/?FEEDING_DURATION=1800</p>

<p>De tabel geeft een overzicht van de instructies met betrekking tot het voederen.</p>

<table style="font-family:'Courier New', Courier, monospace;"><tr><td>
FEEDING_PROGRAM=&lt;value&gt;<br>
FEEDING_TIME_OFFSET=&lt;value&gt;<br>
FEEDING_DURATION=&lt;value&gt;<br>
HAND_FEEDING<br>
AUTOMATIC_FEEDING<br>
PROGRAM_START_TIME=&lt;value&gt;<br>
PROGRAM_END_TIME=&lt;value&gt;<br>
PROGRAM_NUMBER_FEEDINGS=&lt;value&gt;<br>
TEST_FEEDING=&lt;value&gt;
</td></tr></table>

<p>Met de <span style="font-family:'Courier New', Courier, monospace;">FEEDING_PROGRAM</span> instructie kan gekozen worden tussen de 8 voorgeprogrammeerde voederschema's genummerd van 0 tot en met 7. 
Voederprogramma 8 is vrij instelbaar d.w.z. men kan het tijdstip van de eerste voederbeurt ingeven met <span style="font-family:'Courier New', Courier, monospace;">PROGRAM_START_TIME</span>, 
het tijdstip van de laatste voederbeurt met <span style="font-family:'Courier New', Courier, monospace;">PROGRAM_END_TIME</span> en het aantal voederbeurten met 
<span style="font-family:'Courier New', Courier, monospace;">PROGRAM_NUMBER_FEEDINGS</span>. De nodige voederbeurten worden vervolgens gelijkmatig verdeeld over de totale periode.</p>  
<p>Om te vermijden dat de koi de 'gewoonte' aanleren om op vaste tijdstippen eten te krijgen, is er de mogelijkheid om een random variatie van bv. maximaal 15 minuten (zowel vroeger als later)  
op te leggen met de <span style="font-family:'Courier New', Courier, monospace;">FEEDING_TIME_OFFSET</span> instructie. 
Deze random variaties worden elke dag om middernacht bepaald en wijzigen niet gedurende de dag opdat men de voedermomenten kan opvolgen.</p>
<p>Met <span style="font-family:'Courier New', Courier, monospace;">TEST_FEEDING</span> kan het tijdstip opgelegd worden van een test voederbeurt waarna het voorgaande voederprogramma wordt verdergezet.</p>

<p>De actuele instellingen van de Koi Caf&eacute controller zijn voortdurend beschikbaar via de web server.</p>
<p><img style="border:1px solid RGB(80,85,60)" src="./pictures/controller.png"></p>


<p><A HREF="#koicafe"><img src="./pictures/return.png" alt="Return button"/></A></p>
</div>
<div id="footer"><p><br>Last update: May 08, 2023</p></div>
</div>
</body></html>